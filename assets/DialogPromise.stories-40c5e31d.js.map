{"version":3,"file":"DialogPromise.stories-40c5e31d.js","sources":["../../src/utils/noop.ts","../../src/components/Dialog/hooks/useDialogPromise.ts"],"sourcesContent":["export type Noop = () => void;\n\nexport const noop: Noop = () => {\n  // noop\n};\n","import { noop } from '@/utils/noop';\nimport { useCallback, useEffect, useRef, useState } from 'react';\n\nexport const DialogResponse = {\n  main: 'main',\n  sub: 'sub',\n  abort: 'abort',\n} as const;\n\nexport type DialogResponseState =\n  (typeof DialogResponse)[keyof typeof DialogResponse];\n\nexport const useDialogPromise = () => {\n  const ref = useRef<HTMLDialogElement>(null);\n\n  const promiseState = useRef(\n    new Promise<DialogResponseState>((resolve) => {\n      resolve('abort');\n    }),\n  );\n\n  const resolveState = useRef<((value: DialogResponseState) => void) | null>(\n    () => noop,\n  );\n\n  const [isOpen, setIsOpen] = useState(false);\n\n  const showDialog = useCallback(() => {\n    resolveState.current?.('abort');\n    setIsOpen(true);\n    ref.current?.showModal();\n    promiseState.current = new Promise<DialogResponseState>((resolve) => {\n      resolveState.current = resolve;\n    });\n    return promiseState.current;\n  }, []);\n\n  const closeDialogMain = useCallback(() => {\n    setIsOpen(false);\n    ref.current?.close();\n    resolveState.current?.('main');\n  }, []);\n\n  const closeDialogSub = useCallback(() => {\n    setIsOpen(false);\n    ref.current?.close();\n    resolveState.current?.('sub');\n  }, []);\n\n  const closeDialogAbort = useCallback(() => {\n    setIsOpen(false);\n    ref.current?.close();\n    resolveState.current?.('abort');\n  }, []);\n\n  useEffect(() => () => closeDialogAbort(), [closeDialogAbort]);\n\n  return {\n    ref,\n    isOpen,\n    showDialog,\n    closeDialogMain,\n    closeDialogSub,\n    closeDialogAbort,\n  };\n};\n"],"names":["noop","DialogResponse","useDialogPromise","ref","useRef","promiseState","resolve","resolveState","isOpen","setIsOpen","useState","showDialog","useCallback","_a","_b","closeDialogMain","closeDialogSub","closeDialogAbort","useEffect"],"mappings":"qMAEO,MAAMA,EAAa,IAAM,CAEhC,ECDaC,EAAiB,CAC5B,KAAM,OACN,IAAK,MACL,MAAO,OACT,EAKaC,EAAmB,IAAM,CAC9B,MAAAC,EAAMC,SAA0B,IAAI,EAEpCC,EAAeD,EAAA,OACnB,IAAI,QAA8BE,GAAY,CAC5CA,EAAQ,OAAO,CAAA,CAChB,CAAA,EAGGC,EAAeH,EAAA,OACnB,IAAMJ,CAAA,EAGF,CAACQ,EAAQC,CAAS,EAAIC,WAAS,EAAK,EAEpCC,EAAaC,EAAAA,YAAY,IAAM,SACnC,OAAAC,EAAAN,EAAa,UAAb,MAAAM,EAAA,KAAAN,EAAuB,SACvBE,EAAU,EAAI,GACdK,EAAAX,EAAI,UAAJ,MAAAW,EAAa,YACbT,EAAa,QAAU,IAAI,QAA8BC,GAAY,CACnEC,EAAa,QAAUD,CAAA,CACxB,EACMD,EAAa,OACtB,EAAG,CAAE,CAAA,EAECU,EAAkBH,EAAAA,YAAY,IAAM,SACxCH,EAAU,EAAK,GACfI,EAAAV,EAAI,UAAJ,MAAAU,EAAa,SACbC,EAAAP,EAAa,UAAb,MAAAO,EAAA,KAAAP,EAAuB,OACzB,EAAG,CAAE,CAAA,EAECS,EAAiBJ,EAAAA,YAAY,IAAM,SACvCH,EAAU,EAAK,GACfI,EAAAV,EAAI,UAAJ,MAAAU,EAAa,SACbC,EAAAP,EAAa,UAAb,MAAAO,EAAA,KAAAP,EAAuB,MACzB,EAAG,CAAE,CAAA,EAECU,EAAmBL,EAAAA,YAAY,IAAM,SACzCH,EAAU,EAAK,GACfI,EAAAV,EAAI,UAAJ,MAAAU,EAAa,SACbC,EAAAP,EAAa,UAAb,MAAAO,EAAA,KAAAP,EAAuB,QACzB,EAAG,CAAE,CAAA,EAELW,OAAAA,EAAAA,UAAU,IAAM,IAAMD,EAAoB,EAAA,CAACA,CAAgB,CAAC,EAErD,CACL,IAAAd,EACA,OAAAK,EACA,WAAAG,EACA,gBAAAI,EACA,eAAAC,EACA,iBAAAC,CAAA,CAEJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}